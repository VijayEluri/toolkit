<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping
    PUBLIC "-//Hibernate/Hibernate Mapping DTD//EN"
    "http://hibernate.sourceforge.net/hibernate-mapping-2.0.dtd">

<hibernate-mapping
  default-cascade="all"
  package="com.trailmagic.image">
  
  <class
    name="com.trailmagic.image.Image"
    table="images"
    discriminator-value="image">

    <id
      name="id"
      type="long"
      column="image_id"
      unsaved-value="null"
      access="property">
      <generator class="sequence">
        <param name="sequence">id_sequence</param>
      </generator>
    </id>

    <discriminator
      column="type"
      type="string"/>

    <property name="name">
      <column name="name" sql-type="varchar(100)" not-null="true"/>
    </property>

    <property name="title">
      <column name="title" sql-type="varchar(1024)" not-null="true"/>
    </property>
    <property name="caption">
      <column name="caption" sql-type="varchar(4000)"/>
    </property>
    <property name="copyright">
      <column name="copyright" sql-type="varchar(1024)"/>
    </property>
    <property name="creator">
      <column name="creator" sql-type="varchar(1024)"/>
    </property>

    <subclass
      name="Photo"
      discriminator-value="photo">
      <property name="notes" type="text">
        <column name="notes"/>
      </property>
      <property name="captureDate" type="date">
        <column name="capture_date"/>
      </property>
      <many-to-one
        name="lens"
        cascade="none"
        column="lens_id"/>
      <many-to-one
        name="camera"
        cascade="none"
        column="camera_id"/>
    </subclass>
  </class>
    
</hibernate-mapping>